+++
date = '2025-03-15T17:19:10+09:00'
draft = false
title = 'How to Create This Site'
+++

初投稿

どのようにしてこのサイトを作成したのかを書き留めておく.

このサイトは[Hugo](https://gohugo.io/)というGoのフレームワークを用いて作成されている.

Hugoについては公式サイトを読んでほしい.

Hugoのチュートリアルに沿ってプロジェクトを作成すると以下のディレクトリ構成になる.
``` zsh
tree -L 1
.
├── README.md   # 自分で追加した
├── archetypes  # ページのテンプレートが入っている
├── content     # 実際のページを入れる
├── hugo.toml   # 設定
├── public      # buildしたファイルがここに入る
└── themes      # 使用するテーマがここに入る
```

テーマはHugoの公式サイトから探せる. どうやってテーマを適用するのかは他のサイトにあるので省略する.

このサイトはGitHub Pagesとして公開されている. どのようにして公開しているのかを説明する.

GitHub Pagesで公開するには, `自分のGitHubのアカウント名.github.io`でレポジトリーを作成する.
Hugoでサイト作成後, `hugo build`などのコマンドを用いてpublic/にサイトを準備する. そして, public直下のデータを全てルートディレクトリに持ってくると公開できる. 従って別ブランチでサイト執筆を行い, mainブランチにはpublic/のデータ全てがあるようにするべきである. このサイトではGitHub Actionsを用いてdevelopブランチで執筆を行い, リモートにpushされると自動的に適応するようになっている. 以下で詳しく説明する.

- `main`ブランチ ... public/下のファイルが全てある
- `develop`ブランチ ... このブランチで作業を行い. リモートにpushすると自動でmainにpublic/下のファイルだけ移動するようになっている.

**公開するにあたって詰まったところ**
- hugo.tomlの内容, avatorにgravatarで登録した私用のメアドを直接入れるとメアドが漏洩するため, github actions内でsecretsとして取得させた. しかし, その値もMD5かなんかのハッシュ化されているみたいで何度もアタックされると特定されるみたいだが, 今回はそこまでして特定する人いないだろうということで放置
- hugo.tomlのbaseURLの部分, github pagesで公開する場合は自分のアカウント名.github.io/にしておかないとcssなどの読み込みがうまくいかない.


